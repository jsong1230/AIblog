{{ define "main" }}
<div class="home">
    <section class="hero">
        <div class="container">
            <h1>{{ .Site.Title }}</h1>
            <p>{{ .Site.Params.description }}</p>
        </div>
    </section>

    <section class="posts">
        <div class="container">
            <h2>{{ i18n "latest_posts" }}</h2>
            <div class="post-list">
                {{ range where .Site.RegularPages "Type" "post" }}
                <article class="post-card">
                    <a href="{{ .Permalink }}">
                        {{ if .Params.thumbnail }}
                        <img src="{{ .Params.thumbnail }}" alt="{{ .Title }}" class="post-thumbnail">
                        {{ end }}
                        <div class="post-card-content">
                            <h3>{{ .Title }}</h3>
                            <p class="post-excerpt">{{ (.Description | replaceRE "\\\\?#{1,6}\\s*" "" | replaceRE "\\n" " " | default (truncate 150 (.Summary | replaceRE "^#{1,6}\\s+" "" | replaceRE "\\n" " "))) | plainify }}</p>
                            <div class="post-meta">
                                <time>
                                    {{ if eq .Language.Lang "en" }}
                                        {{ $day := .Date.Day }}
                                        {{ $suffix := "th" }}
                                        {{ if or (eq $day 1) (eq $day 21) (eq $day 31) }}{{ $suffix = "st" }}{{ else if or (eq $day 2) (eq $day 22) }}{{ $suffix = "nd" }}{{ else if or (eq $day 3) (eq $day 23) }}{{ $suffix = "rd" }}{{ end }}
                                        {{ printf "%s %d%s, %d" (.Date.Format "Jan") $day $suffix (.Date.Year) }}
                                    {{ else }}
                                        {{ .Date.Format (i18n "date_format") }}
                                    {{ end }}
                                </time>
                                {{ if .Params.categories }}
                                <span class="category">{{ index .Params.categories 0 }}</span>
                                {{ end }}
                            </div>
                        </div>
                    </a>
                </article>
                {{ end }}
            </div>
        </div>
    </section>
</div>
{{ end }}